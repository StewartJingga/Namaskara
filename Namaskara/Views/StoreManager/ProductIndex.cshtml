@model IEnumerable<Namaskara.Models.Product>

@{
    ViewBag.Title = "Product Index";
}

<h2>Product Index</h2>
<p>
    @Html.ActionLink("Category List", "CategoryIndex", "StoreManager") | @Html.ActionLink("Product List", "ProductIndex", new { id = 0 })
</p>
<div>
    <button class="float-left" href="@Url.Action("AllAvailable")" onclick="allAvailable(this)">Make All Product Available</button>
    <button class="float-left" href="@Url.Action("AllUnavailable")" onclick="allUnavailable(this)">Make All Product Unavailable</button>
    <div class="clear"></div>
</div>

<br />
<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Origin)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsAvailable)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.ActionLink(item.Name, "Details", new { id = item.ProductId })
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Origin)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsAvailable)
        </td>
        <td>
            @Html.ActionLink("Details", "Details", new { id=item.ProductId })
        </td>
    </tr>
}

</table>

@section scripts {
    <script>
        function allAvailable(butt) {
            var r = confirm("Are you sure you want to make all product available?");
            if (r == true) {
                window.location = $(butt).attr('href');
            } else {
                return false;
            }
        }

        function allUnavailable(butt) {
            var r = confirm("Are you sure you want to make all product 'un'available?");
            if (r == true) {
                window.location = $(butt).attr('href');
            } else {
                return false;
            }
        }
    </script>
    }
